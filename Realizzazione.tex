\documentclass[Tesi.tex]{subfiles}

\begin{document}
\chapter{Realizzazione}

\section{Analisi}

Una delle prime attività svolte è stata la raccolta della documentazione e la sua analisi. \\
Sono subito emerse enorme incongruenze tra i vari documenti in quanto alcuni erano datati, quindi si è dovuto aggiornarli. \\

\subsection{Lista apparati}
Come base di questa attività si sono utilizzati alcuni documenti Excel con riportate informazioni sparpagliate sui dispositivi, sono stati integrati tra di loro e da questa attività è emerso che c'erano informazioni assenti per alcuni devices, che sono state completate. \\
Successivamente si è andato ad aggiungere la posizione GPS di ogni dispositivo, utilizzando i dati presenti nel software di monitoraggio presente. \\
I dispositivi possedevano già dei nominativi che ne indicavano la locazione all'interno del contesto, che sono stati mantenuti. \\

\subsection{Analisi sistemi di sicurezza fisica}
La sicurezza fisica era perseguita prevalentemente controllando l'accesso fisico ai dispositivi di rete. Gli switch sono chiusi a chiave negli appositi armadietti e, ove possibile, mantenuti all'interno delle strutture dove l'accesso è consentito solo al personale. \\
Esiste una struttura di VLAN attua a impedire l'accesso alle risorse a coloro che non ne possiedono i permessi, ma da sola non era sufficiente a garantire la sicurezza. \\
Un possibile attacco che si poteva praticare era forzare un armadietto di rete, costruiti in plastica, ed utilizzare una porta Ethernet untagged per poter connettersi ai dispositivi di quella VLAN. \\
Questo risulta molto pericoloso considerando che la VLAN di manutenzione, presente in quasi tutti gli switch, permette l'accesso a tutti gli altri apparati di rete. \\
In questo contesto si è andati ad operare sul controllo d'accesso, impedendo ad un dispositivo non riconosciuto di entrare in una VLAN semplicemente connettendosi ad una porta corretta, ma richiedendogli informazioni aggiuntive mediante lo standard 802.1X.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\linewidth]{"images/Outdoor rack"}
	\caption{Armadietto di rete da esterni}
	\label{fig:Armadietto di rete da esterni}
\end{figure}

\subsection{Analisi sistemi di monitoraggio}
La rete analizzata presentava già un software per il monitoraggio, denominato PRTG Network Monitor. \\
Il suo compito era quello di controllare che tutti i sensori in esso inserito appartenenti ai devices funzionassero correttamente, avvisando qualora ci fossero dei problemi. \\
Una delle problematiche fondamentali di questo software era la difficoltà nel tracciare grafici relativi alla connessione, impedendo di identificare eventuali colli di bottiglia, pacchetti persi o errori di trasmissione. \\
Questo software veniva utilizzato in versione gratuita e quindi presentava alcune limitazioni, la più critica era la quantità di sensori che può monitorare, limitata a 1000, che non consentiva di controllare in modo soddisfacente tutti gli apparati di rete presenti. \\

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{"images/PRTGStatistics"}
	\caption{Schermata di PRTG Network Monitor}
	\label{fig:Schermata di PRTG Network Monitor}
\end{figure}

\subsection{Schema di rete}
Per facilitare tutte le attività successive di configurazione e monitoraggio si è proceduto alla redazione di uno schema di rete. \\
Essendo già disponibile uno schema datato 2015 della rete realizzato dal cliente in Microsoft Visio si è scelto di procedere con lo stesso software. \\
A supporto di questo lavoro si sono utilizzate svariate mappe prodotte in tempi e per fini diversi tra di loro, la cui integrazione ha evidenziato degli errori che sono stati segnalati. \\
Lo schema di rete di partenza e quello realizzato, presentanti il nome, il modello di dispositivo e l'indirizzo ip, sono presenti in \hyperref[sec:Appendice A]{Appendice A}.\\
La posizione degli apparati è stata modificata in modo da seguire più fedelmente la loro collocazione reale, favorendone una identificazione più veloce. \\
Si può notare come nella prima versione c'erano molte incongruenze nella forma nella quale sono stati riportati i dati, in quanto è stata prevalentemente scritta ed utilizzata da una singola persona e quindi non c'è stata attenzione rivolta alla chiarezza espositiva. \\
Alcune informazioni riportate sugli schemi sono state redatte o omesse per motivi di sicurezza e di privacy. \\

\newpage
\section{Progettazione}

Una volta terminata la fase di analisi della rete si è proceduto a progettare le modifiche che saranno implementate. \\

%TODO
\subsection{Schema di rete}
%TODO
\subsection{Aggiornamenti configurazioni di rete}
%TODO
\subsection{Nuove politiche di sicurezza fisica}
%TODO
\subsection{Nuove politiche di sicurezza logica basata su 802.1X}

\subsection{Progettazione Observium}
Prima di installare e mettere in funzione Observium lo si è provato localmente, andando ad individuare pregi e difetti del programma e comprendendo quindi quale fosse il miglior modo di utilizzarlo.\\
Inizialmente è stato configurato inserendo al suo interno 5 apparati di rete, sui quali si sono testate svariate impostazioni per comprendere quali potessero ritornare utili al monitoraggio della rete attuale.\\\\
Si è notato che la posizione GPS rilevata automaticamente del software era troppo imprecisa, ma la funzionalità era di elevata importanza visto l'estensione della rete. Si è dunque deciso di inserirle prelevandole dal software PRTG Network Monitor, nel quale erano state precedentemente inserite. \\
Un'altra opzione che si è rilevata fondamentale era la disabilitazione delle interfacce non in uso, che altrimenti avrebbero generato degli warning. \\
\begin{figure}[H]
	\centering
	\includegraphics[width=1\linewidth]{"images/Observium_porte"}
	\caption{Interfacce visualizzate all'interno di Observium}
	\label{fig:Interfacce visualizzate all'interno di Observium}
\end{figure}
Ulteriormente il software visualizzava anche la locazione come configurata all'interno dei devices alla loro installazione, ma risultava poco indicativa, quindi si è scelto di sovrascriverla, indicando la zona di appartenenza.

\subsection{Progettazione rConfig}
Analogamente a quanto effettuato con Observium, anche per rConfig si è proceduto ad un suo test per comprenderne le potenzialità e la migliore modalità di utilizzo. \\
Sono stati inseriti anche per esso 6 dispositivi, in modo tale da avere almeno un dispositivo per ogni modello di apparato in utilizzo. \\\\
Si sono notati alcuni problemi, sia di utilizzo che di sicurezza, e di conseguenza si è dovuto fare particolare attenzione nella progettazione, in modo da impedire configurazioni errate ed accessi non autorizzati. \\
Uno dei problemi di sicurezza riscontrati, che si è scoperto essere presente anche nelle altre istanze utilizzate dall'azienda, è una vulnerabilità \gloss{SQL injection} che permetteva di ottenere una lista completa dei report effettuati, compresi quelli rimossi o filtrati per l'account in uso. \\
\begin{figure}[H]
	\centering
	\includegraphics[width=1\linewidth]{"images/rConfig_SQLi"}
	\caption{Attacco SQL injection su rConfig, sulla destra tutte le configurazioni navigabili}
	\label{fig:Attacco SQL injection su rConfig, sulla destra tutte le configurazioni navigabili}
\end{figure}
%TODO: parlare del problema di configurazione di quello al porto?
TODO: parlare del problema di configurazione di quello al porto?

\subsection{Definizione name-convention}
La name-convention scelta per la denominazione degli apparati è la seguente:\\
{ \centering
\begin{ttfamily}
	\large DEVICE-ZONA[-LOCAZIONE][-NUMERO\_INC]\\
\end{ttfamily}
}
\medskip
Nella quale i campi presenti indicano: 
\begin{itemize}
	\item  \begin{ttfamily}\textbf{DEVICE}\end{ttfamily}: Il modello del dispositivo installato, ad esempio "HP-2520-8-PoE";
	\item  \begin{ttfamily}\textbf{ZONA}\end{ttfamily}: La zona di appartenenza del dispositivo, ad esempio "ZONA-A", "EDIFICI" o "AMMINISTRAZIONE";
	\item  \begin{ttfamily}\textbf{LOCAZIONE}\end{ttfamily}: La locazione geografica utilizzata per identificare il dispositivo, opzionale nel caso basti la zona per l'identificazione univoca dell'armadio;
	\item  \begin{ttfamily}\textbf{NUMERO}\_INC\end{ttfamily}: Numero incrementale, da incrementare nel caso di più apparati nello stesso armadio di rete.
\end{itemize}

Questa convenzione è stata scelta in accordo con il cliente per permettere una identificazione veloce dell'apparato di rete anche ai manutentori, in linea con le denominazione utilizzata internamente. \\\\
La presenza del modello di dispositivo è contrario alla best-practice da seguire, in quanto la sostituzione di un apparato con un modello successivo richiede la sostituzione della voce all'interno del DNS e di conseguenza la riconfigurazione dei software di monitoraggio. Ciò è stato richiesto in quanto si favorisce l'immediatezza dell'identificazione del dispositivo a discapito della manutenibilità, tenendo in considerazione che gli upgrade non sono frequenti. \\

\subsection{Inserimento nomi DNS sulla lista apparati}


%TODO
\subsection{Lista dei test e risultati previsti}
%TODO
\subsection{Produzione della prima bozza della documentazione progettuale}
%TODO


\newpage
\section{Implementazione}

%TODO
\subsection{Creazione di un laboratorio con un nuovo switch dove verranno testate le configurazioni prima di andare in produzione}
%TODO
\subsection{Implementazione delle due nuove VM con il software precaricato Observium e RConfig}
%TODO
\subsection{Inserimento su DNS interno tutti nomi hosts degli apparati di network ( switch, router, ecc )} 
%TODO
\subsection{Configurazione di base software RConfig} 
%TODO
\subsection{Backup delle configurazioni di tutti gli apparati switch della Lan Campus con RConfig} 
%TODO
\subsection{Predisporre servizio NPS ( Radius ) sui due Active Directory servers} 
%TODO
\subsection{Creazione della configurazione di test per laboratorio con nuove funzionalità di sicurezza} 
%TODO
\subsection{Test nuove funzionalità con switch laboratorio} 
%TODO
\subsection{Creazione nuove configurazioni per tutti gli switch del Campus} 
%TODO
\subsection{Caricamento configurazioni negli switch del Campus} 
%TODO
\subsection{Backup delle nuove configurazioni di tutti gli apparati switch della Lan Campus con RConfig} 
%TODO
\subsection{Test di base nuove funzionalità di sicurezza implementate} 
%TODO
\subsection{Configurazione di base software monitoraggio Observium}
%TODO
\subsection{Schedulazione periodica backup configurazioni di tutti gli apparati switch della Lan Campus con RConfig}
%TODO
\subsection{Aggiornamento della documentazione progettuale}


% TODO Observium - METTERE TOTALE DISPOSITIVI E PORTE

\newpage
\section{Test in produzione}
%TODO
\subsection{Monitoraggio eventuali anomalie, censirle, trubleshooting, idenfiticare la soluzione, trovare un workaround, implementare e testare la soluzione}
%TODO
\subsection{Aggiornare la documentazione}
%TODO

\newpage
\section{Tuning}
%TODO
\subsection{In sistema Observium avrà già acquisito dati da oltre un settimana, verranno quindi configurate tutte le soglie di allarmi con notifica via email e instant message Telegram}
%TODO
\subsection{Completamento della documentazione}

\end{document}
